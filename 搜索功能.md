## 后端部分blog/views.py添加
```
@require_GET
def search(request):
    q = request.GET.get('q', '').strip()

    blogs = Blog.objects.filter(
        Q(title__icontains=q) | Q(content__icontains=q)
    ) if q else Blog.objects.all()  # 无关键词显示全部

    return render(request, 'index.html', context={'blogs': blogs, 'q': q})
```
## blog/urls.py添加一行
```
path('search/',views.search,name='search'),
```
## 修改templates/base.html中form表单的参数
```<form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search" action="{% url 'blog:search' %}" method="get">
                <input type="search"
                       class="form-control"
                       placeholder="搜索..."
                       aria-label="搜索"
                       _mstplaceholder="99723"
                       _msthash="33"
                       _mstaria-label="74607" name="q">
            </form>
```
## 修改templates/index.html
```
{% extends 'base.html' %}

{% block title %}幻想简报首页{% endblock %}

{% block main %}
    <h1>博客列表</h1>
    <div class="row row-cols-2 row-gap-4">
    {% for blog in blogs %}
        <div class="card">
            <div class="card-header">
                <a href="{% url 'blog:blog_detail' blog_id=blog.id %}" class="herf">{{ blog.title }}</a>
            </div>
            <div class="card-body" style="height: 100px">
                <p class="card-text">{{ blog.content|striptags|truncatechars:200 }}</p>
            </div>
            <div class="card-footer text-body-secondary d-flex justify-content-between">
                <div>
                    <img src="{% static 'image/avatar.webp' %}" class="rounded-circle" width="30" height="30" alt="">
                    {{ blog.author.username }}
                </div>
                <div>{{ blog.pub_time|date:"Y年m月d日 h时i分" }}</div>
            </div>
        </div>
    {% endfor %}
    </div>
{% endblock %}
```
## 修改blog/views.py的index视图函数
```
def index(request):
    blogs = Blog.objects.all()
    return  render(request, 'index.html',context={'blogs':blogs})
```
